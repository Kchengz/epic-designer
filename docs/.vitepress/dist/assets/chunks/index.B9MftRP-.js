import{aD as ce,k as oe,y as fe,ay as me,ao as ve,aE as ye,x as U,aF as pe,aG as W,d as Y,I as R,r as E,ah as ge,N as Z,h as L,o as O,c as X,l as H,n as k,m as o,t as be,w as D,b as K,J as he,e as q,P as te,j as S,R as Ce,ar as we,a2 as Ee,Z as ke,al as Me,M as Te,an as Be,am as Ie,T as De,ax as Se}from"./framework.Bp6pYewT.js";import{aC as x,aD as Le,n as _,ag as se,aE as J,ah as Fe,aF as $e,aG as Ae,t as G,v as V,aH as j,W as Oe,w as ae,aj as ne,ak as Pe,u as Q,o as ze,aI as ee,aB as Ne,z as Re}from"./index-D0Hjkk1x.DbREz0MF.js";import{i as Ye,u as He,C as Ve,a as We}from"./index.Ds2ynwF9.js";import{g as Xe,F as je,i as Ue,E as Ke}from"./focus-trap.Dce9nhMP.js";import{u as qe}from"./use-global-config.CKdSFgtm.js";const xe=(...e)=>t=>{e.forEach(l=>{ce(l)?l(t):l.value=t})},_e=(e,t,l,c)=>{let a={offsetX:0,offsetY:0};const u=m=>{const d=m.clientX,y=m.clientY,{offsetX:p,offsetY:h}=a,f=e.value.getBoundingClientRect(),r=f.left,w=f.top,F=f.width,P=f.height,$=document.documentElement.clientWidth,z=document.documentElement.clientHeight,N=-r+p,A=-w+h,M=$-r-F+p,T=z-w-P+h,C=s=>{let v=p+s.clientX-d,g=h+s.clientY-y;c!=null&&c.value||(v=Math.min(Math.max(v,N),M),g=Math.min(Math.max(g,A),T)),a={offsetX:v,offsetY:g},e.value&&(e.value.style.transform=`translate(${x(v)}, ${x(g)})`)},B=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",B)},i=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",u)},n=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",u)};oe(()=>{fe(()=>{l.value?i():n()})}),me(()=>{n()})},Ge=(e,t={})=>{ve(e)||Le("[useLockscreen]","You need to pass a ref param to this function");const l=t.ns||_("popup"),c=ye(()=>l.bm("parent","hidden"));if(!se||J(document.body,c.value))return;let a=0,u=!1,i="0";const n=()=>{setTimeout(()=>{Ae(document==null?void 0:document.body,c.value),u&&document&&(document.body.style.width=i)},200)};U(e,m=>{if(!m){n();return}u=!J(document.body,c.value),u&&(i=document.body.style.width),a=Xe(l.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,y=Fe(document.body,"overflowY");a>0&&(d||y==="scroll")&&u&&(document.body.style.width=`calc(100% - ${a}px)`),$e(document.body,c.value)}),pe(()=>n())},le=e=>{if(!e)return{onClick:W,onMousedown:W,onMouseup:W};let t=!1,l=!1;return{onClick:i=>{t&&l&&e(i),t=l=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{l=i.target===i.currentTarget}}},Ze=G({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:V([String,Array,Object])},zIndex:{type:V([String,Number])}}),Je={click:e=>e instanceof MouseEvent},Qe="overlay";var eo=Y({name:"ElOverlay",props:Ze,emits:Je,setup(e,{slots:t,emit:l}){const c=_(Qe),a=m=>{l("click",m)},{onClick:u,onMousedown:i,onMouseup:n}=le(e.customMaskEvent?void 0:a);return()=>e.mask?R("div",{class:[c.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:i,onMouseup:n},[E(t,"default")],j.STYLE|j.CLASS|j.PROPS,["onClick","onMouseup","onMousedown"]):ge("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[E(t,"default")])}});const oo=eo,ie=Symbol("dialogInjectionKey"),re=G({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ye},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),to={close:()=>!0},so=["aria-level"],ao=["aria-label"],no=["id"],lo=Y({name:"ElDialogContent"}),io=Y({...lo,props:re,emits:to,setup(e){const t=e,{t:l}=He(),{Close:c}=Ve,{dialogRef:a,headerRef:u,bodyId:i,ns:n,style:m}=Z(ie),{focusTrapRef:d}=Z(je),y=L(()=>[n.b(),n.is("fullscreen",t.fullscreen),n.is("draggable",t.draggable),n.is("align-center",t.alignCenter),{[n.m("center")]:t.center}]),p=xe(d,a),h=L(()=>t.draggable),f=L(()=>t.overflow);return _e(a,u,h,f),(r,w)=>(O(),X("div",{ref:o(p),class:k(o(y)),style:te(o(m)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:u,class:k([o(n).e("header"),{"show-close":r.showClose}])},[E(r.$slots,"header",{},()=>[H("span",{role:"heading","aria-level":r.ariaLevel,class:k(o(n).e("title"))},be(r.title),11,so)]),r.showClose?(O(),X("button",{key:0,"aria-label":o(l)("el.dialog.close"),class:k(o(n).e("headerbtn")),type:"button",onClick:w[0]||(w[0]=F=>r.$emit("close"))},[R(o(Oe),{class:k(o(n).e("close"))},{default:D(()=>[(O(),K(he(r.closeIcon||o(c))))]),_:1},8,["class"])],10,ao)):q("v-if",!0)],2),H("div",{id:o(i),class:k(o(n).e("body"))},[E(r.$slots,"default")],10,no),r.$slots.footer?(O(),X("footer",{key:0,class:k(o(n).e("footer"))},[E(r.$slots,"footer")],2)):q("v-if",!0)],6))}});var ro=ae(io,[["__file","dialog-content.vue"]]);const uo=G({...re,appendToBody:Boolean,appendTo:{type:V(String),default:"body"},beforeClose:{type:V(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),co={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>Pe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},fo=(e,t)=>{var l;const a=we().emit,{nextZIndex:u}=We();let i="";const n=Q(),m=Q(),d=S(!1),y=S(!1),p=S(!1),h=S((l=e.zIndex)!=null?l:u());let f,r;const w=qe("namespace",ze),F=L(()=>{const b={},I=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(b[`${I}-margin-top`]=e.top),e.width&&(b[`${I}-width`]=x(e.width))),b}),P=L(()=>e.alignCenter?{display:"flex"}:{});function $(){a("opened")}function z(){a("closed"),a(ne,!1),e.destroyOnClose&&(p.value=!1)}function N(){a("close")}function A(){r==null||r(),f==null||f(),e.openDelay&&e.openDelay>0?{stop:f}=ee(()=>B(),e.openDelay):B()}function M(){f==null||f(),r==null||r(),e.closeDelay&&e.closeDelay>0?{stop:r}=ee(()=>s(),e.closeDelay):s()}function T(){function b(I){I||(y.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(b):M()}function C(){e.closeOnClickModal&&T()}function B(){se&&(d.value=!0)}function s(){d.value=!1}function v(){a("openAutoFocus")}function g(){a("closeAutoFocus")}function ue(b){var I;((I=b.detail)==null?void 0:I.focusReason)==="pointer"&&b.preventDefault()}e.lockScroll&&Ge(d);function de(){e.closeOnPressEscape&&T()}return U(()=>e.modelValue,b=>{b?(y.value=!1,A(),p.value=!0,h.value=Ue(e.zIndex)?u():h.value++,Ce(()=>{a("open"),t.value&&(t.value.scrollTop=0)})):d.value&&M()}),U(()=>e.fullscreen,b=>{t.value&&(b?(i=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=i)}),oe(()=>{e.modelValue&&(d.value=!0,p.value=!0,A())}),{afterEnter:$,afterLeave:z,beforeLeave:N,handleClose:T,onModalClick:C,close:M,doClose:s,onOpenAutoFocus:v,onCloseAutoFocus:g,onCloseRequested:de,onFocusoutPrevented:ue,titleId:n,bodyId:m,closed:y,style:F,overlayDialogStyle:P,rendered:p,visible:d,zIndex:h}},mo=["aria-label","aria-labelledby","aria-describedby"],vo=Y({name:"ElDialog",inheritAttrs:!1}),yo=Y({...vo,props:uo,emits:co,setup(e,{expose:t}){const l=e,c=Ee();Ne({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!c.title));const a=_("dialog"),u=S(),i=S(),n=S(),{visible:m,titleId:d,bodyId:y,style:p,overlayDialogStyle:h,rendered:f,zIndex:r,afterEnter:w,afterLeave:F,beforeLeave:P,handleClose:$,onModalClick:z,onOpenAutoFocus:N,onCloseAutoFocus:A,onCloseRequested:M,onFocusoutPrevented:T}=fo(l,u);ke(ie,{dialogRef:u,headerRef:i,bodyId:y,ns:a,rendered:f,style:p});const C=le(z),B=L(()=>l.draggable&&!l.fullscreen);return t({visible:m,dialogContentRef:n}),(s,v)=>(O(),K(Se,{to:s.appendTo,disabled:s.appendTo!=="body"?!1:!s.appendToBody},[R(De,{name:"dialog-fade",onAfterEnter:o(w),onAfterLeave:o(F),onBeforeLeave:o(P),persisted:""},{default:D(()=>[Me(R(o(oo),{"custom-mask-event":"",mask:s.modal,"overlay-class":s.modalClass,"z-index":o(r)},{default:D(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":s.title||void 0,"aria-labelledby":s.title?void 0:o(d),"aria-describedby":o(y),class:k(`${o(a).namespace.value}-overlay-dialog`),style:te(o(h)),onClick:v[0]||(v[0]=(...g)=>o(C).onClick&&o(C).onClick(...g)),onMousedown:v[1]||(v[1]=(...g)=>o(C).onMousedown&&o(C).onMousedown(...g)),onMouseup:v[2]||(v[2]=(...g)=>o(C).onMouseup&&o(C).onMouseup(...g))},[R(o(Ke),{loop:"",trapped:o(m),"focus-start-el":"container",onFocusAfterTrapped:o(N),onFocusAfterReleased:o(A),onFocusoutPrevented:o(T),onReleaseRequested:o(M)},{default:D(()=>[o(f)?(O(),K(ro,Te({key:0,ref_key:"dialogContentRef",ref:n},s.$attrs,{center:s.center,"align-center":s.alignCenter,"close-icon":s.closeIcon,draggable:o(B),overflow:s.overflow,fullscreen:s.fullscreen,"show-close":s.showClose,title:s.title,"aria-level":s.headerAriaLevel,onClose:o($)}),Be({header:D(()=>[s.$slots.title?E(s.$slots,"title",{key:1}):E(s.$slots,"header",{key:0,close:o($),titleId:o(d),titleClass:o(a).e("title")})]),default:D(()=>[E(s.$slots,"default")]),_:2},[s.$slots.footer?{name:"footer",fn:D(()=>[E(s.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):q("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,mo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ie,o(m)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var po=ae(yo,[["__file","dialog.vue"]]);const Eo=Re(po);export{Eo as E,co as a,oo as b,xe as c,uo as d,Ge as e,_e as f,le as g,ie as h,Ze as i,Je as o,fo as u};
