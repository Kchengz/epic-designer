import{E as w}from"./index-NP0d70UY.CIJ65HY9.js";import{d as x,j as u,N as D,ai as k,Z as _,k as j,h as i,o as d,c as p,I as E,w as F,r as f,F as M,D as N,M as O,m as P,e as $}from"./framework.Bp6pYewT.js";const B={key:0,class:"form-main",style:{height:"100%"}},q=x({__name:"form",props:{componentSchema:{type:Object,require:!0,default:()=>({})}},setup(v,{expose:h}){const a=u(null),r=D("forms",{}),y=u(!0),l=k({});_("formData",l);const n=v;function s(){return l}function m(e){Object.assign(l,e)}function S(){var e;return(e=a.value)==null?void 0:e.validate()}j(async()=>{var e,t,o,c;if(((e=n.componentSchema)==null?void 0:e.type)==="form"&&r.value&&a.value){const C=((o=(t=n.componentSchema)==null?void 0:t.componentProps)==null?void 0:o.name)??((c=n.componentSchema)==null?void 0:c.name)??"default";return r.value[C]=a.value,a.value.getData=s,a.value.setData=m,!1}});const g=i(()=>{const e=n.componentSchema.componentProps;let t=e.labelCol,o=e.wrapperCol;return e.labelLayout==="fixed"&&(t={style:`width:${e.labelWidth}px`},o={style:"width:auto;flex:1"}),{...e,labelCol:t,wrapperCol:o}}),b=i(()=>n.componentSchema.children??[]);return h({form:a,getData:s,setData:m,validate:S}),(e,t)=>y.value?(d(),p("div",B,[E(P(w),O({ref_key:"form",ref:a,model:l},g.value,{style:{height:"100%"}}),{default:F(()=>[f(e.$slots,"edit-node",{},()=>[(d(!0),p(M,null,N(b.value,o=>f(e.$slots,"node",{componentSchema:o})),256))])]),_:3},16,["model"])])):$("",!0)}});export{q as default};
