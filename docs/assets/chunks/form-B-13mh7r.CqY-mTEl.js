import{F as b}from"./index.PO2iXlOp.js";import{d as C,j as D,N as F,an as _,Z as j,k,h as c,o as u,c as d,I as w,w as N,r as f,F as P,D as $,M as q,m as B}from"./framework.Bj7ZzXMq.js";import"./useConfigInject.BvmlE8fS.js";import"./revoke.BrdSO0Zx.js";import"./index-dBLYGWys.BhaKRvQG.js";import"./commonjsHelpers-CT_km90n.D7mXbCtF.js";import"./index.DOFZgDuz.js";import"./transition.OUsjLKOK.js";import"./cloneDeep.EyURs6P1.js";import"./index.Dmr5GdgH.js";import"./getPrototype.57D5m4QL.js";import"./getTag.DtjCqBUh.js";import"./getAllKeys.BwAxqbuf.js";import"./Row.BLiC_7wV.js";import"./useFlexGapSupport.CH3HOXNj.js";import"./index.BzOCTf23.js";import"./baseIteratee.Cw2_iwum.js";import"./isEqual.3E0r62oz.js";import"./hasIn.BpqLs2Mi.js";import"./baseFindIndex.D7XfJLKM.js";import"./debounce.BlaEsI6c.js";import"./Col.wuGn8SFB.js";import"./collapseMotion.CP5a2Yy8.js";import"./colors.Cl0BMt5X.js";import"./motion.wQpHIsPt.js";import"./zoom.B-iW8zoU.js";import"./FormItemContext.BZIHXwK-.js";import"./createContext.CKi_Suqn.js";import"./isPlainObject.DLjdWRXV.js";import"./omit.-feKOJMZ.js";import"./flatRest.ASmQkvUo.js";const L={class:"form-main",style:{height:"100%"}},ue=C({__name:"form",props:{componentSchema:{type:Object,require:!0,default:()=>({})}},setup(v,{expose:h}){const a=v,o=D(null),m=F("forms",{}),n=_({});j("formData",n);function i(){return n}function l(){var e;return(e=o.value)==null?void 0:e.validateFields()}function p(e){Object.assign(n,e)}k(async()=>{var e,r,t,s;if(((e=a.componentSchema)==null?void 0:e.type)==="form"&&m.value&&o.value){const x=((t=(r=a.componentSchema)==null?void 0:r.componentProps)==null?void 0:t.name)??((s=a.componentSchema)==null?void 0:s.name)??"default";return o.value.validate=l,m.value[x]=o.value,o.value.getData=i,o.value.setData=p,!1}});const g=c(()=>{const e=a.componentSchema.componentProps;let r=e.labelCol,t=e.wrapperCol;return e.labelLayout==="fixed"&&(r={flex:`${e.labelWidth}px`},t={flex:1}),{...e,labelCol:r,wrapperCol:t}});function S(e){console.log(e)}const y=c(()=>a.componentSchema.children??[]);return h({form:o,getData:i,setData:p,validate:l}),(e,r)=>(u(),d("div",L,[w(B(b),q({ref_key:"form",ref:o,model:n},g.value,{style:{height:"100%"},onFinish:S}),{default:N(()=>[f(e.$slots,"edit-node",{},()=>[(u(!0),d(P,null,$(y.value,t=>f(e.$slots,"node",{componentSchema:t})),256))])]),_:3},16,["model"])]))}});export{ue as default};
