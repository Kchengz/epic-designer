import{q as G,_ as c,k as K,b as w,x as J,y as N,v as Q}from"./useConfigInject.BdvR4SYr.js";import{aG as A,aH as _,aI as Z,F as X,aF as Y,Z as ee,h as g,N as te,d as D,aJ as ne,k as F,x as T,B as V,R as W,I as B,aA as re,y as ae,G as h,ap as oe}from"./framework.C8YhLXwE.js";import{P as I,w as x}from"./transition.CLzKmLry.js";let j=!1;try{const e=Object.defineProperty({},"passive",{get(){j=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}function ye(e,n,r,t){if(e&&e.addEventListener){let a=t;a===void 0&&j&&(n==="touchstart"||n==="touchmove"||n==="wheel")&&(a={passive:!1}),e.addEventListener(n,r,a)}return{remove:()=>{e&&e.removeEventListener&&e.removeEventListener(n,r)}}}function we(e){let{prefixCls:n,animation:r,transitionName:t}=e;return r?{name:`${n}-${r}`}:t?{name:t}:{}}function k(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=e;if(Array.isArray(e)&&(a=G(e)[0]),!a)return null;const o=A(a,n,t);return o.props=r?c(c({},o.props),n):o.props,K(typeof o.props.class!="object"),o}function Ce(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e.map(t=>k(t,n,r))}function R(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Array.isArray(e))return e.map(a=>R(a,n,r,t));{if(!_(e))return e;const a=k(e,n,r,t);return Array.isArray(a.children)&&(a.children=R(a.children)),a}}function be(e,n,r){Y(A(e,c({},n)),r)}const O=e=>(e||[]).some(n=>_(n)?!(n.type===Z||n.type===X&&!O(n.children)):!0)?e:null;function Pe(e,n,r,t){var a;const o=(a=e[n])===null||a===void 0?void 0:a.call(e,r);return O(o)?o:t==null?void 0:t()}const H=Symbol("PortalContextKey"),ie=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inTriggerContext:!0};ee(H,{inTriggerContext:n.inTriggerContext,shouldRender:g(()=>{const{sPopupVisible:r,popupRef:t,forceRender:a,autoDestroy:o}=e||{};let l=!1;return(r||t||a)&&(l=!0),!r&&o&&(l=!1),l})})},ue=()=>{ie({},{inTriggerContext:!1});const e=te(H,{shouldRender:g(()=>!1),inTriggerContext:!1});return{shouldRender:g(()=>e.shouldRender.value||e.inTriggerContext===!1)}},le=D({compatConfig:{MODE:3},name:"Portal",inheritAttrs:!1,props:{getContainer:I.func.isRequired,didUpdate:Function},setup(e,n){let{slots:r}=n,t=!0,a;const{shouldRender:o}=ue();function l(){o.value&&(a=e.getContainer())}ne(()=>{t=!1,l()}),F(()=>{a||l()});const v=T(o,()=>{o.value&&!a&&(a=e.getContainer()),a&&v()});return V(()=>{W(()=>{var u;o.value&&((u=e.didUpdate)===null||u===void 0||u.call(e,e))})}),()=>{var u;return o.value?t?(u=r.default)===null||u===void 0?void 0:u.call(r):a?B(re,{to:a},r):null:null}}});let S;function z(e){if(typeof document>"u")return 0;if(S===void 0){const n=document.createElement("div");n.style.width="100%",n.style.height="200px";const r=document.createElement("div"),t=r.style;t.position="absolute",t.top="0",t.left="0",t.pointerEvents="none",t.visibility="hidden",t.width="200px",t.height="150px",t.overflow="hidden",r.appendChild(n),document.body.appendChild(r);const a=n.offsetWidth;r.style.overflow="scroll";let o=n.offsetWidth;a===o&&(o=r.clientWidth),document.body.removeChild(r),S=a-o}return S}function L(e){const n=e.match(/^(.*)px$/),r=Number(n==null?void 0:n[1]);return Number.isNaN(r)?z():r}function Se(e){if(typeof document>"u"||!e||!(e instanceof Element))return{width:0,height:0};const{width:n,height:r}=getComputedStyle(e,"::-webkit-scrollbar");return{width:L(n),height:L(r)}}const se=`vc-util-locker-${Date.now()}`;let U=0;function de(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}function fe(e){const n=g(()=>!!e&&!!e.value);U+=1;const r=`${se}_${U}`;ae(t=>{if(w()){if(n.value){const a=z(),o=de();J(`
html body {
  overflow-y: hidden;
  ${o?`width: calc(100% - ${a}px);`:""}
}`,r)}else N(r);t(()=>{N(r)})}},{flush:"post"})}let f=0;const y=w(),M=e=>{if(!y)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(typeof e=="object"&&e instanceof window.HTMLElement)return e}return document.body},$e=D({compatConfig:{MODE:3},name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:I.any,visible:{type:Boolean,default:void 0},autoLock:Q(),didUpdate:Function},setup(e,n){let{slots:r}=n;const t=h(),a=h(),o=h(),l=h(1),v=w()&&document.createElement("div"),u=()=>{var i,s;t.value===v&&((s=(i=t.value)===null||i===void 0?void 0:i.parentNode)===null||s===void 0||s.removeChild(t.value)),t.value=null};let m=null;const C=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||t.value&&!t.value.parentNode?(m=M(e.getContainer),m?(m.appendChild(t.value),!0):!1):!0},$=()=>y?(t.value||(t.value=v,C(!0)),E(),t.value):null,E=()=>{const{wrapperClassName:i}=e;t.value&&i&&i!==t.value.className&&(t.value.className=i)};return V(()=>{E(),C()}),fe(g(()=>e.autoLock&&e.visible&&w()&&(t.value===document.body||t.value===v))),F(()=>{let i=!1;T([()=>e.visible,()=>e.getContainer],(s,p)=>{let[b,d]=s,[q,P]=p;y&&(m=M(e.getContainer),m===document.body&&(b&&!q?f+=1:i&&(f-=1))),i&&(typeof d=="function"&&typeof P=="function"?d.toString()!==P.toString():d!==P)&&u(),i=!0},{immediate:!0,flush:"post"}),W(()=>{C()||(o.value=x(()=>{l.value+=1}))})}),oe(()=>{const{visible:i}=e;y&&m===document.body&&(f=i&&f?f-1:f),u(),x.cancel(o.value)}),()=>{const{forceRender:i,visible:s}=e;let p=null;const b={getOpenCount:()=>f,getContainer:$};return l.value&&(i||s||a.value)&&(p=B(le,{getContainer:$,ref:a,didUpdate:e.didUpdate},{default:()=>{var d;return(d=r.default)===null||d===void 0?void 0:d.call(r,b)}})),p}}}),ce=e=>({animationDuration:e,animationFillMode:"both"}),me=e=>({animationDuration:e,animationFillMode:"both"}),Ee=function(e,n,r,t){const o=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${o}${e}-enter,
      ${o}${e}-appear
    `]:c(c({},ce(t)),{animationPlayState:"paused"}),[`${o}${e}-leave`]:c(c({},me(t)),{animationPlayState:"paused"}),[`
      ${o}${e}-enter${e}-enter-active,
      ${o}${e}-appear${e}-appear-active
    `]:{animationName:n,animationPlayState:"running"},[`${o}${e}-leave${e}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}};export{$e as P,ye as a,le as b,k as c,Pe as d,R as e,Ce as f,we as g,z as h,Ee as i,Se as j,j as s,be as t,ie as u};
