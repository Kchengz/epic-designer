import{B as h}from"./index.BxXi7ljV.js";import{d as v,j as g,x as m,h as V,ah as o,R as x}from"./framework.Bj7ZzXMq.js";import{V as B}from"./index.DvF_pUzD.js";import{s as a}from"./index.CknOZcBh.js";import"./useConfigInject.BvmlE8fS.js";import"./revoke.BrdSO0Zx.js";import"./index-dBLYGWys.BhaKRvQG.js";import"./commonjsHelpers-CT_km90n.D7mXbCtF.js";import"./index.DOFZgDuz.js";import"./transition.OUsjLKOK.js";import"./useState.DG-Wr2Ur.js";import"./createContext.CKi_Suqn.js";import"./getTag.DtjCqBUh.js";import"./baseEach.CkCjRC0N.js";import"./getAllKeys.BwAxqbuf.js";import"./baseIteratee.Cw2_iwum.js";import"./isEqual.3E0r62oz.js";import"./index.Dmr5GdgH.js";import"./getPrototype.57D5m4QL.js";import"./hasIn.BpqLs2Mi.js";import"./collapseMotion.CP5a2Yy8.js";import"./colors.Cl0BMt5X.js";import"./motion.wQpHIsPt.js";import"./zoom.B-iW8zoU.js";import"./useRefs.BNYNBfan.js";import"./useMergedState.DMJdz4bp.js";import"./index.PO2iXlOp.js";import"./cloneDeep.EyURs6P1.js";import"./Row.BLiC_7wV.js";import"./useFlexGapSupport.CH3HOXNj.js";import"./index.BzOCTf23.js";import"./baseFindIndex.D7XfJLKM.js";import"./debounce.BlaEsI6c.js";import"./Col.wuGn8SFB.js";import"./FormItemContext.BZIHXwK-.js";import"./isPlainObject.DLjdWRXV.js";import"./omit.-feKOJMZ.js";import"./flatRest.ASmQkvUo.js";const pt=v({props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(u,{emit:i,attrs:n}){const r=g([]);m(r,t=>{i("update:modelValue",t),i("change",t)}),m(()=>u.modelValue,t=>{if(t!=null&&t.length>0&&r.value!=null){if(r.value===t)return;r.value.length=0,r.value.push(...t)}},{deep:!0,immediate:!0});function s(t){x(()=>{r.value=t})}const f=t=>{var e,p;if(t.file.status!=="uploading"){if(t.file.status==="done"){const l=(p=(e=t.file.response)==null?void 0:e.data)==null?void 0:p.url;if(!t.file.url&&!l){t.file.status="error",a.error("上传失败");return}t.file.url=l}t.file.status==="error"&&a.error("upload error")}},d=t=>{},c=V(()=>({...n,"onUpdate:file-list":s,"file-list":r.value,"onBefore-upload":d,onChange:f}));return()=>o("div",null,{default:()=>[o(B,c.value,{default:()=>[o(h,{},{default:()=>[o("span",{class:"iconfont epic-icon-shangchuan1",style:{"margin-right":"2px"}}),o("span",null,{default:()=>"上传文件"})]})]})]})}});export{pt as default};
