import{F as x}from"./index.BCx5dPF_.js";import{d as C,j as D,N as F,an as j,Z as k,k as w,h as c,o as u,c as d,I as _,w as M,r as f,F as O,D as P,M as W,m as $}from"./framework.C8YhLXwE.js";import"./useConfigInject.BdvR4SYr.js";import"./revoke.D5jw0695.js";import"./index-DZavvwVo.CLpuZ4sn.js";import"./commonjsHelpers-CT_km90n.D7mXbCtF.js";import"./index.DOFZgDuz.js";import"./transition.CLzKmLry.js";import"./cloneDeep.EyURs6P1.js";import"./index.Dmr5GdgH.js";import"./getPrototype.57D5m4QL.js";import"./getTag.DtjCqBUh.js";import"./getAllKeys.BwAxqbuf.js";import"./Row.B7RSkVej.js";import"./useFlexGapSupport.BWbjcqBZ.js";import"./index.Cy-bLqQk.js";import"./baseIteratee.Cw2_iwum.js";import"./isEqual.3E0r62oz.js";import"./hasIn.BpqLs2Mi.js";import"./baseFindIndex.D7XfJLKM.js";import"./debounce.BlaEsI6c.js";import"./Col.CuEWsGGL.js";import"./collapseMotion.BUdMvg7h.js";import"./colors.BsFslAWF.js";import"./motion.D2PutZEk.js";import"./zoom.Cr4XiLm0.js";import"./FormItemContext.CYcLimGm.js";import"./createContext.BfXkc5F1.js";import"./isPlainObject.DLjdWRXV.js";import"./omit.-feKOJMZ.js";import"./flatRest.ASmQkvUo.js";const B={class:"form-main",style:{height:"100%"}},ue=C({__name:"form",props:{componentSchema:{type:Object,require:!0,default:()=>({})}},setup(v,{expose:h}){const a=v,o=D(null),m=F("forms",{}),n=j({});k("formData",n);function l(){return n}function i(){var e;return(e=o.value)==null?void 0:e.validateFields()}function p(e){Object.assign(n,e)}w(async()=>{var e,r,t,s;if(((e=a.componentSchema)==null?void 0:e.type)==="form"&&m.value&&o.value){const S=((t=(r=a.componentSchema)==null?void 0:r.componentProps)==null?void 0:t.name)??((s=a.componentSchema)==null?void 0:s.name)??"default";return o.value.validate=i,m.value[S]=o.value,o.value.getData=l,o.value.setData=p,!1}});const b=c(()=>{const e=a.componentSchema.componentProps;let r=e.labelCol,t=e.wrapperCol;return e.labelLayout==="fixed"&&(r={flex:`${typeof e.labelWidth=="number"?e.labelWidth+"px":e.labelWidth}`},t={flex:1}),{...e,labelCol:r,wrapperCol:t}});function g(e){console.log(e)}const y=c(()=>a.componentSchema.children??[]);return h({form:o,getData:l,setData:p,validate:i}),(e,r)=>(u(),d("div",B,[_($(x),W({ref_key:"form",ref:o,model:n},b.value,{style:{height:"100%"},onFinish:g}),{default:M(()=>[f(e.$slots,"edit-node",{},()=>[(u(!0),d(O,null,P(y.value,t=>f(e.$slots,"node",{componentSchema:t})),256))])]),_:3},16,["model"])]))}});export{ue as default};
