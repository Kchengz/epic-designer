import{V as P}from"./index.4XIcSfkM.js";import{R as j}from"./index.s9d4nbxY.js";import{s as l}from"./index.C36ewNIB.js";import{d as R,ak as U,j as p,x as c,h as _,o as d,c as f,I as v,w as A,e as E,as as I,at as T,m as g,l as h,R as q}from"./framework.Bkcw4pAp.js";import"./useConfigInject.wP4KD9rp.js";import"./revoke.gXiQk-K7.js";import"./index-dBLYGWys.7krGtM9u.js";import"./commonjsHelpers-CT_km90n.D7mXbCtF.js";import"./index.DOFZgDuz.js";import"./transition.DSy_p8AL.js";import"./baseEach.CkCjRC0N.js";import"./getAllKeys.BwAxqbuf.js";import"./getTag.DtjCqBUh.js";import"./baseIteratee.Cw2_iwum.js";import"./isEqual.3E0r62oz.js";import"./index.Dmr5GdgH.js";import"./getPrototype.57D5m4QL.js";import"./hasIn.BpqLs2Mi.js";import"./index.yeekTgsm.js";import"./useState.B62L11RK.js";import"./createContext.CJeaNZiI.js";import"./collapseMotion.Ds9JQsaA.js";import"./colors.05NN7HEy.js";import"./motion.zWiVtFc2.js";import"./zoom.DcferND9.js";import"./useRefs.BGjcODZH.js";import"./useMergedState.CGSSUBcX.js";import"./index.CXMS5XkY.js";import"./cloneDeep.EyURs6P1.js";import"./Row.C2wd6ogr.js";import"./useFlexGapSupport.DBCY_Bx4.js";import"./index.unhIxbWw.js";import"./baseFindIndex.D7XfJLKM.js";import"./debounce.BlaEsI6c.js";import"./Col.BCsZvFYz.js";import"./FormItemContext.C2zMXT6_.js";import"./isPlainObject.DLjdWRXV.js";import"./omit.-feKOJMZ.js";import"./flatRest.ASmQkvUo.js";import"./index.Cm2WFZ5x.js";import"./KeyCode.Bs92buUR.js";const z={class:"epic-upload-image"},D={key:0},F=h("span",{class:"iconfont epic-icon-shangchuan1 mr-2px"},null,-1),G=h("div",{class:"ant-upload-text"},"点击上传",-1),K=[F,G],Re=R({__name:"uploadImage",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number}},emits:["update:modelValue","change"],setup(x,{emit:V}){const y=U(),m=x,u=V,r=p([]),o=p(""),n=p(!1),s=e=>{n.value=e};c(r,e=>{u("update:modelValue",e),u("change",e)}),c(()=>m.modelValue,e=>{if(e!=null&&e.length>0&&r.value!=null){if(r.value===e)return;r.value.length=0,r.value.push(...e)}},{deep:!0,immediate:!0});function C(e){q(()=>{r.value=e})}const w=e=>{var i,t;if(e.file.status!=="uploading"){if(e.file.status==="done"){const a=(t=(i=e.file.response)==null?void 0:i.data)==null?void 0:t.url;if(!e.file.url&&!a){e.file.status="error",l.error("上传失败");return}e.file.url=a,e.file.thumbUrl=a}e.file.status==="error"&&l.error("upload error")}},b=e=>{},k=_(()=>({...y,"list-type":"picture-card",accept:"image/gif,image/jpeg,image/jpg,image/png,image/svg","onUpdate:file-list":C,"file-list":r.value,"onBefore-upload":b,onChange:w,onPreview:B}));function B(e){e.url&&(o.value=e.url,s(!0))}function N(){o.value&&l.error("图片地址无法访问!")}return(e,i)=>(d(),f("div",z,[v(g(P),I(T(k.value)),{default:A(()=>{var t;return[(((t=r.value)==null?void 0:t.length)??0)<(m.maxCount??999)?(d(),f("div",D,K)):E("",!0)]}),_:1},16),v(g(j),{style:{display:"none"},src:o.value,preview:{visible:n.value,onVisibleChange:s},onError:N},null,8,["src","preview"])]))}});export{Re as default};
