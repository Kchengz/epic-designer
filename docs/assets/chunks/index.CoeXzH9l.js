import{j as te,u as de,k as Oe,c as H,_ as d,a as b,o as D,l as Ae,n as Ne,p as Ie,q as ze,t as re,v as Me}from"./useConfigInject.BvmlE8fS.js";import{u as Re,D as je}from"./index.CTU7QZEN.js";import{i as me,a as K,P as A}from"./transition.OUsjLKOK.js";import{a as Ee,t as De}from"./motion.wQpHIsPt.js";import{a as Le,b as _e,c as Ve,d as We,I as Ge}from"./revoke.BrdSO0Zx.js";import{B as J,c as ve,u as He,C as Z}from"./index.BxXi7ljV.js";import{c as Ue,u as qe}from"./useFlexGapSupport.CH3HOXNj.js";import{d as L,I as f,F as pe,G as S,ap as Ce,k as Qe,aF as se,h as N,x as ee,m as Ke,am as Xe,j as ie}from"./framework.Bj7ZzXMq.js";import{C as Ye,g as Je,a as Ze}from"./index.CknOZcBh.js";import{o as en}from"./KeyCode.rKlZJYRd.js";var nn=function(e,a){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(e);u<n.length;u++)a.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(e,n[u])&&(l[n[u]]=e[n[u]]);return l};let ne;const tn=e=>{ne={x:e.pageX,y:e.pageY},setTimeout(()=>ne=null,100)};Ue()&&Ee(document.documentElement,"click",tn,!0);const on=()=>({prefixCls:String,visible:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},confirmLoading:{type:Boolean,default:void 0},title:A.any,closable:{type:Boolean,default:void 0},closeIcon:A.any,onOk:Function,onCancel:Function,"onUpdate:visible":Function,"onUpdate:open":Function,onChange:Function,afterClose:Function,centered:{type:Boolean,default:void 0},width:[String,Number],footer:A.any,okText:A.any,okType:String,cancelText:A.any,icon:A.any,maskClosable:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},okButtonProps:D(),cancelButtonProps:D(),destroyOnClose:{type:Boolean,default:void 0},wrapClassName:String,maskTransitionName:String,transitionName:String,getContainer:{type:[String,Function,Boolean,Object],default:void 0},zIndex:Number,bodyStyle:D(),maskStyle:D(),mask:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},wrapProps:Object,focusTriggerAfterClose:{type:Boolean,default:void 0},modalRender:Function,mousePosition:D()}),T=L({compatConfig:{MODE:3},name:"AModal",inheritAttrs:!1,props:me(on(),{width:520,confirmLoading:!1,okType:"primary"}),setup(e,a){let{emit:l,slots:n,attrs:u}=a;const[s]=te("Modal"),{prefixCls:v,rootPrefixCls:C,direction:x,getPopupContainer:c}=de("modal",e),[i,t]=Re(v);Oe(e.visible===void 0);const r=g=>{l("update:visible",!1),l("update:open",!1),l("cancel",g),l("change",!1)},o=g=>{l("ok",g)},p=()=>{var g,h;const{okText:y=(g=n.okText)===null||g===void 0?void 0:g.call(n),okType:k,cancelText:m=(h=n.cancelText)===null||h===void 0?void 0:h.call(n),confirmLoading:P}=e;return f(pe,null,[f(J,b({onClick:r},e.cancelButtonProps),{default:()=>[m||s.value.cancelText]}),f(J,b(b({},ve(k)),{},{loading:P,onClick:o},e.okButtonProps),{default:()=>[y||s.value.okText]})])};return()=>{var g,h;const{prefixCls:y,visible:k,open:m,wrapClassName:P,centered:w,getContainer:F,closeIcon:B=(g=n.closeIcon)===null||g===void 0?void 0:g.call(n),focusTriggerAfterClose:$=!0}=e,I=nn(e,["prefixCls","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),M=H(P,{[`${v.value}-centered`]:!!w,[`${v.value}-wrap-rtl`]:x.value==="rtl"});return i(f(je,b(b(b({},I),u),{},{rootClassName:t.value,class:H(t.value,u.class),getContainer:F||(c==null?void 0:c.value),prefixCls:v.value,wrapClassName:M,visible:m??k,onClose:r,focusTriggerAfterClose:$,transitionName:K(C.value,"zoom",e.transitionName),maskTransitionName:K(C.value,"fade",e.maskTransitionName),mousePosition:(h=I.mousePosition)!==null&&h!==void 0?h:ne}),d(d({},n),{footer:n.footer||p,closeIcon:()=>f("span",{class:`${v.value}-close-x`},[B||f(Le,{class:`${v.value}-close-icon`},null)])})))}}}),ln=()=>{const e=S(!1);return Ce(()=>{e.value=!0}),e},an={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:D(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function ce(e){return!!(e&&e.then)}const ue=L({compatConfig:{MODE:3},name:"ActionButton",props:an,setup(e,a){let{slots:l}=a;const n=S(!1),u=S(),s=S(!1);let v;const C=ln();Qe(()=>{e.autofocus&&(v=setTimeout(()=>{var t,r;return(r=(t=Ae(u.value))===null||t===void 0?void 0:t.focus)===null||r===void 0?void 0:r.call(t)}))}),Ce(()=>{clearTimeout(v)});const x=function(){for(var t,r=arguments.length,o=new Array(r),p=0;p<r;p++)o[p]=arguments[p];(t=e.close)===null||t===void 0||t.call(e,...o)},c=t=>{ce(t)&&(s.value=!0,t.then(function(){C.value||(s.value=!1),x(...arguments),n.value=!1},r=>(C.value||(s.value=!1),n.value=!1,Promise.reject(r))))},i=t=>{const{actionFn:r}=e;if(n.value)return;if(n.value=!0,!r){x();return}let o;if(e.emitEvent){if(o=r(t),e.quitOnNullishReturnValue&&!ce(o)){n.value=!1,x(t);return}}else if(r.length)o=r(e.close),n.value=!1;else if(o=r(),!o){x();return}c(o)};return()=>{const{type:t,prefixCls:r,buttonProps:o}=e;return f(J,b(b(b({},ve(t)),{},{onClick:i,loading:s.value,prefixCls:r},o),{},{ref:u}),l)}}});function E(e){return typeof e=="function"?e():e}const ge=L({name:"ConfirmDialog",inheritAttrs:!1,props:["icon","onCancel","onOk","close","closable","zIndex","afterClose","visible","open","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","okType","prefixCls","okCancel","width","mask","maskClosable","okText","cancelText","autoFocusButton","transitionName","maskTransitionName","type","title","content","direction","rootPrefixCls","bodyStyle","closeIcon","modalRender","focusTriggerAfterClose","wrapClassName","confirmPrefixCls","footer"],setup(e,a){let{attrs:l}=a;const[n]=te("Modal");return()=>{const{icon:u,onCancel:s,onOk:v,close:C,okText:x,closable:c=!1,zIndex:i,afterClose:t,keyboard:r,centered:o,getContainer:p,maskStyle:g,okButtonProps:h,cancelButtonProps:y,okCancel:k,width:m=416,mask:P=!0,maskClosable:w=!1,type:F,open:B,title:$,content:I,direction:M,closeIcon:_,modalRender:q,focusTriggerAfterClose:R,rootPrefixCls:O,bodyStyle:j,wrapClassName:Pe,footer:oe}=e;let V=u;if(!u&&u!==null)switch(F){case"info":V=f(Ge,null,null);break;case"success":V=f(We,null,null);break;case"error":V=f(Ve,null,null);break;default:V=f(_e,null,null)}const we=e.okType||"primary",X=e.prefixCls||"ant-modal",W=`${X}-confirm`,Se=l.style||{},le=k??F==="confirm",ae=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",Q=`${X}-confirm`,Fe=H(Q,`${Q}-${e.type}`,{[`${Q}-rtl`]:M==="rtl"},l.class),Y=n.value,Be=le&&f(ue,{actionFn:s,close:C,autofocus:ae==="cancel",buttonProps:y,prefixCls:`${O}-btn`},{default:()=>[E(e.cancelText)||Y.cancelText]});return f(T,{prefixCls:X,class:Fe,wrapClassName:H({[`${Q}-centered`]:!!o},Pe),onCancel:$e=>C==null?void 0:C({triggerCancel:!0},$e),open:B,title:"",footer:"",transitionName:K(O,"zoom",e.transitionName),maskTransitionName:K(O,"fade",e.maskTransitionName),mask:P,maskClosable:w,maskStyle:g,style:Se,bodyStyle:j,width:m,zIndex:i,afterClose:t,keyboard:r,centered:o,getContainer:p,closable:c,closeIcon:_,modalRender:q,focusTriggerAfterClose:R},{default:()=>[f("div",{class:`${W}-body-wrapper`},[f("div",{class:`${W}-body`},[E(V),$===void 0?null:f("span",{class:`${W}-title`},[E($)]),f("div",{class:`${W}-content`},[E(I)])]),oe!==void 0?E(oe):f("div",{class:`${W}-btns`},[Be,f(ue,{type:we,actionFn:v,close:C,autofocus:ae==="ok",buttonProps:h,prefixCls:`${O}-btn`},{default:()=>[E(x)||(le?Y.okText:Y.justOkText)]})])])]})}}}),z=[],U=e=>{const a=document.createDocumentFragment();let l=d(d({},en(e,["parentContext","appContext"])),{close:s,open:!0}),n=null;function u(){n&&(se(null,a),n=null);for(var c=arguments.length,i=new Array(c),t=0;t<c;t++)i[t]=arguments[t];const r=i.some(o=>o&&o.triggerCancel);e.onCancel&&r&&e.onCancel(()=>{},...i.slice(1));for(let o=0;o<z.length;o++)if(z[o]===s){z.splice(o,1);break}}function s(){for(var c=arguments.length,i=new Array(c),t=0;t<c;t++)i[t]=arguments[t];l=d(d({},l),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),u.apply(this,i)}}),l.visible&&delete l.visible,v(l)}function v(c){typeof c=="function"?l=c(l):l=d(d({},l),c),n&&De(n,l,a)}const C=c=>{const i=Je,t=i.prefixCls,r=c.prefixCls||`${t}-modal`,o=i.iconPrefixCls,p=Ze();return f(Ye,b(b({},i),{},{prefixCls:t}),{default:()=>[f(ge,b(b({},c),{},{rootPrefixCls:t,prefixCls:r,iconPrefixCls:o,locale:p,cancelText:c.cancelText||p.cancelText}),null)]})};function x(c){const i=f(C,d({},c));return i.appContext=e.parentContext||e.appContext||i.appContext,se(i,a),i}return n=x(l),z.push(s),{destroy:s,update:v}};function ye(e){return d(d({},e),{type:"warning"})}function xe(e){return d(d({},e),{type:"info"})}function be(e){return d(d({},e),{type:"success"})}function ke(e){return d(d({},e),{type:"error"})}function he(e){return d(d({},e),{type:"confirm"})}const rn=()=>({config:Object,afterClose:Function,destroyAction:Function,open:Boolean}),sn=L({name:"HookModal",inheritAttrs:!1,props:me(rn(),{config:{width:520,okType:"primary"}}),setup(e,a){let{expose:l}=a;var n;const u=N(()=>e.open),s=N(()=>e.config),{direction:v,getPrefixCls:C}=Ne(),x=C("modal"),c=C(),i=()=>{var p,g;e==null||e.afterClose(),(g=(p=s.value).afterClose)===null||g===void 0||g.call(p)},t=function(){e.destroyAction(...arguments)};l({destroy:t});const r=(n=s.value.okCancel)!==null&&n!==void 0?n:s.value.type==="confirm",[o]=te("Modal",Ie.Modal);return()=>f(ge,b(b({prefixCls:x,rootPrefixCls:c},s.value),{},{close:t,open:u.value,afterClose:i,okText:s.value.okText||(r?o==null?void 0:o.value.okText:o==null?void 0:o.value.justOkText),direction:s.value.direction||v.value,cancelText:s.value.cancelText||(o==null?void 0:o.value.cancelText)}),null)}});let fe=0;const cn=L({name:"ElementsHolder",inheritAttrs:!1,setup(e,a){let{expose:l}=a;const n=S([]);return l({addModal:s=>(n.value.push(s),n.value=n.value.slice(),()=>{n.value=n.value.filter(v=>v!==s)})}),()=>n.value.map(s=>s())}});function un(){const e=S(null),a=S([]);ee(a,()=>{a.value.length&&([...a.value].forEach(v=>{v()}),a.value=[])},{immediate:!0});const l=s=>function(C){var x;fe+=1;const c=S(!0),i=S(null),t=S(Ke(C)),r=S({});ee(()=>C,m=>{h(d(d({},Xe(m)?m.value:m),r.value))});const o=function(){c.value=!1;for(var m=arguments.length,P=new Array(m),w=0;w<m;w++)P[w]=arguments[w];const F=P.some(B=>B&&B.triggerCancel);t.value.onCancel&&F&&t.value.onCancel(()=>{},...P.slice(1))};let p;const g=()=>f(sn,{key:`modal-${fe}`,config:s(t.value),ref:i,open:c.value,destroyAction:o,afterClose:()=>{p==null||p()}},null);p=(x=e.value)===null||x===void 0?void 0:x.addModal(g),p&&z.push(p);const h=m=>{t.value=d(d({},t.value),m)};return{destroy:()=>{i.value?o():a.value=[...a.value,o]},update:m=>{r.value=m,i.value?h(m):a.value=[...a.value,()=>h(m)]}}},n=N(()=>({info:l(xe),success:l(be),error:l(ke),warning:l(ye),confirm:l(he)})),u=Symbol("modalHolderKey");return[n.value,()=>f(cn,{key:u,ref:e},null)]}function Te(e){return U(ye(e))}T.useModal=un;T.info=function(a){return U(xe(a))};T.success=function(a){return U(be(a))};T.error=function(a){return U(ke(a))};T.warning=Te;T.warn=Te;T.confirm=function(a){return U(he(a))};T.destroyAll=function(){for(;z.length;){const a=z.pop();a&&a()}};T.install=function(e){return e.component(T.name,T),e};const fn={small:8,middle:16,large:24},dn=()=>({prefixCls:String,size:{type:[String,Number,Array]},direction:A.oneOf(re("horizontal","vertical")).def("horizontal"),align:A.oneOf(re("start","end","center","baseline")),wrap:Me()});function mn(e){return typeof e=="string"?fn[e]:e||0}const G=L({compatConfig:{MODE:3},name:"ASpace",inheritAttrs:!1,props:dn(),slots:Object,setup(e,a){let{slots:l,attrs:n}=a;const{prefixCls:u,space:s,direction:v}=de("space",e),[C,x]=He(u),c=qe(),i=N(()=>{var y,k,m;return(m=(y=e.size)!==null&&y!==void 0?y:(k=s==null?void 0:s.value)===null||k===void 0?void 0:k.size)!==null&&m!==void 0?m:"small"}),t=ie(),r=ie();ee(i,()=>{[t.value,r.value]=(Array.isArray(i.value)?i.value:[i.value,i.value]).map(y=>mn(y))},{immediate:!0});const o=N(()=>e.align===void 0&&e.direction==="horizontal"?"center":e.align),p=N(()=>H(u.value,x.value,`${u.value}-${e.direction}`,{[`${u.value}-rtl`]:v.value==="rtl",[`${u.value}-align-${o.value}`]:o.value})),g=N(()=>v.value==="rtl"?"marginLeft":"marginRight"),h=N(()=>{const y={};return c.value&&(y.columnGap=`${t.value}px`,y.rowGap=`${r.value}px`),d(d({},y),e.wrap&&{flexWrap:"wrap",marginBottom:`${-r.value}px`})});return()=>{var y,k;const{wrap:m,direction:P="horizontal"}=e,w=(y=l.default)===null||y===void 0?void 0:y.call(l),F=ze(w),B=F.length;if(B===0)return null;const $=(k=l.split)===null||k===void 0?void 0:k.call(l),I=`${u.value}-item`,M=t.value,_=B-1;return f("div",b(b({},n),{},{class:[p.value,n.class],style:[h.value,n.style]}),[F.map((q,R)=>{let O=w.indexOf(q);O===-1&&(O=`$$space-${R}`);let j={};return c.value||(P==="vertical"?R<_&&(j={marginBottom:`${M/($?2:1)}px`}):j=d(d({},R<_&&{[g.value]:`${M/($?2:1)}px`}),m&&{paddingBottom:`${r.value}px`})),C(f(pe,{key:O},[f("div",{class:I,style:j},[q]),R<_&&$&&f("span",{class:`${I}-split`,style:j},[$])]))})])}}});G.Compact=Z;G.install=function(e){return e.component(G.name,G),e.component(Z.name,Z),e};const Pn=G;export{ue as A,T as M,Pn as U,un as a,ln as u};
